---
title: Virtual machine security settings in Hyper-V Manager
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: 
  - hyper-v
  - techgroup-compute
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 06ab4f5f-6b8e-4058-8108-76785aa93d4c
robots: noindex,nofollow
---
# Virtual machine security settings in Hyper-V Manager
<?xml version="1.0" encoding="UTF-8"?>
<developerConceptualDocument xmlns="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ddue.schemas.microsoft.com/authoring/2003/5 http://dduestorage.blob.core.windows.net/ddueschema/developer.xsd" xmlns:xlink="http://www.w3.org/1999/xlink">
    <introduction>
        <para><embeddedLabel>This is preliminary content and subject to change.</embeddedLabel></para>
    <para>Use the virtual machine security settings in Hyper-V Manager to help protect the data and state of a virtual machine. You can protect virtual machines from inspection, theft, and tampering from both malware that may run on the host and datacenter administrators. The level of security you get depends on the host hardware you run, the virtual machine generation, and whether you set up the service, called the Host Guardian Service, that authorizes hosts to start shielded virtual machines. </para><para>The Host Guardian Service is a new role in <token>winthreshold_server_Token>. It identifies legitimate Hyper-V hosts and allows them to run a given virtual machine. You’d most commonly set up the Host Guardian Service for a datacenter. But you can create a shielded virtual machine to run it locally without setting up a Host Guardian Service. You can later distribute the shielded virtual machine to a Host Guardian Fabric.  </para><para>To learn how you can make your virtual machines more secure with the Host Guardian Service, see the following resources.</para><list class="bullet"><listItem><para><externalLink><linkText>Harden the Fabric: Protecting Tenant Secrets in Hyper-V (Ignite video)</linkText><linkUri>https://channel9.msdn.com/Events/Ignite/2015/BRK3457</linkUri></externalLink></para></listItem><listItem><para>Shielded VMs and Guarded Fabric Step-by-step deployment guides:<br/><externalLink><linkText>Administrator-trusted attestation</linkText><linkUri>http://go.microsoft.com/fwlink/?LinkId=708624</linkUri></externalLink><br/><externalLink><linkText>Hardware-trusted attestation</linkText><linkUri>http://go.microsoft.com/fwlink/?LinkId=708643</linkUri></externalLink></para></listItem></list></introduction>
    
    <section>
<title>Secure Boot setting in Hyper-V Manager</title><content><para>Secure Boot is a feature available with generation 2 virtual machines that helps prevent unauthorized firmware, operating systems, or Unified Extensible Firmware Interface (UEFI) drivers (also known as option ROMs) from running at boot time. Secure Boot is enabled by default. You can use secure boot with generation 2 virtual machines that run Windows or Linux distribution operating systems.</para><para>The   templates described in the following table refer to  the certificates that you need to verify the integrity of the boot process.  </para><table border="1"><thead><tr><TD><para>Template name</para></TD><TD><para>Description</para></TD></tr></thead><tbody><tr><TD><para>Microsoft Windows</para></TD><TD><para>Select to secure boot the virtual machine for a Windows operating system.  </para></TD></tr><tr><TD><para>Microsoft UEFI Certificate Authority      </para></TD><TD><para>Select to  secure boot the virtual machine  for  a Linux distribution operating system.</para></TD></tr></tbody></table><para>For more information, see the following topics.</para><list class="bullet"><listItem><para> <externalLink><linkText>Secure Boot</linkText><linkUri>http://technet.microsoft.com/library/dn486875.aspx</linkUri></externalLink></para></listItem><listItem><para> <link xlink:href="02e31413-6140-4723-a8d6-46c7f667792d">Should I create a generation 1 or 2 virtual machine in Hyper-V?</link></para></listItem><listItem><para><externalLink><linkText>Linux and FreeBSD Virtual Machines on Hyper-V</linkText><linkUri>https://technet.microsoft.com/library/dn531030.aspx</linkUri></externalLink></para></listItem></list></content>
</section><section>
<title>Trusted Platform Module setting in Hyper-V Manager</title><content><para>If you want to be able to encrypt the virtual machine disk by using BitLocker, select <ui>Enable Trusted Platform Module</ui>.  This setting makes a virtualized Trusted Platform Module (TPM) chip available to your virtual machine.  </para><para>To use a virtual TPM for a virtual machine, you must also enable Isolated User Mode on the Hyper-V host before you can start the virtual machine. Isolated User Mode is the runtime environment that hosts security applications inside Virtual Secure Mode on the Hyper-V host. Virtual Secure Mode is used to secure and protect the state of the virtual TPM chip.</para><para>To enable Isolated User Mode on the Hyper-V host that runs <token>winthreshold_server_Token> or <token>winthreshold_client_Token>,</para><list class="ordered"><listItem><para>Open a Windows PowerShell as an administrator.</para></listItem><listItem><para>Run the following commands: </para><code>Enable-WindowsOptionalFeature -Feature IsolatedUserMode -Online
New-Item -Path HKLM:\SYSTEM\CurrentControlSet\Control\DeviceGuard -Force
New-ItemProperty -Path HKLM:\SYSTEM\CurrentControlSet\Control\DeviceGuard   -Name EnableVirtualizationBasedSecurity -Value 1 -PropertyType DWord –Force
</code></listItem></list><para> You can migrate a virtual machine with virtual TPM enabled to any host that runs <token>winthreshold_server_Token>, <token>winthreshold_client_Token> build 10586 or higher versions. But if you migrate it to another host, you may not be able to start it. You must update the Key Protector for that virtual machine to authorize the new host to run the virtual machine. For more information, see <link xlink:href="cf257b3a-9365-42e2-a37c-327cac6028d4">Shielded VM Guarded Fabric Deployment Guide</link> and <link xlink:href="bc4a4971-f727-40cd-91f5-2ee6d24b54cb">System requirements for Hyper-V on Windows Server 2016 Technical Preview</link>.</para></content>
</section><section>
<title>Security Profile settings in Hyper-V Manager</title><content><para>You can add additional protection for a virtual machine by selecting Data protection or Shielding. If you have a Key Protection policy configured on a Host Guardian Service for this Hyper-V host, you may not be able to change these settings. </para><para>The security profile settings are described in the following table.</para><table border="1"><thead><tr><TD><para>Option</para></TD><TD><para>Description</para></TD></tr></thead><tbody><tr><TD><para>No additional protection</para></TD><TD><para>No additional protection. </para></TD></tr><tr><TD><para>Data protection</para></TD><TD><para> Encrypts virtual machine saved state and live migration traffic.</para></TD></tr><tr><TD><para>Shielding</para></TD><TD><para>Provides the strongest level of protection. Encrypts virtual machine saved state and live migration traffic. Disables management features like console connection and integration components.  </para></TD></tr></tbody></table><para>If you choose Data protection or Shielding to create a shielded virtual machine and you migrate it to another host, you may not be able to start it. You must update the Key Protector for that virtual machine to authorize the new host to run the virtual machine.  For more information, see <link xlink:href="cf257b3a-9365-42e2-a37c-327cac6028d4">Shielded VM Guarded Fabric Deployment Guide</link>.</para><para>For more information about security in <token>winthreshold_server_Token>, see <link xlink:href="b886b2fd-3567-4f0a-8aa3-4ba7923d2d21">Security and Assurance</link>.</para></content>
</section><relatedTopics/>
</developerConceptualDocument>

